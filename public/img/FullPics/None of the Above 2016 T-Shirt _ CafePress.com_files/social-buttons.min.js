var productNoTemp,wishlistItemNoTemp,wishlistNoTemp,isNewList=!1,reloadPage;
function showPopupError(a){/MSIE (\d+\.\d+);/.test(navigator.userAgent)&&new Number(RegExp.$1);var b=a.indexOf("width:"),c=a.indexOf("height:");width=parseInt(a.substring(b+6,b+a.substring(b).indexOf("px;")));height=parseInt(a.substring(c+7,c+a.substring(c).indexOf("px;")))+65;570>$(window).width()&&(a=a.replace("width:740px;","").replace("height:275px;",""),width="85%",height="auto");$("#TB_ajaxContent").html("");0==$("#wishListPopupContainer").length&&(b=document.createElement("div"),b.setAttribute("id",
"wishListPopupContainer"),b.setAttribute("style","display:none;"),document.body.appendChild(b));$("#wishListPopupContainer").html(a.toString());$(".wishListsMenuLinkSelector").find(".wishListsHoverMenuSelector").hide();$("#wishListPopupContainer").html(a.toString()).dialog({width:width,height:height,modal:!0})}
function showPopupWithRefresh(a,b){if("success"==b)try{var c;try{JSON}catch(h){c=eval("("+a+")")}c||(c=JSON.parse(a));c.Alert&&0<c.Alert.toString().length?alert(c.Alert.toString()):(refreshWishLists(c.WishLists),c.UpdateListName?setWishlist():showPopup(c.Popup,b))}catch(j){showPopupError(a)}}
function showPopup(a,b){if("success"==b){var c=a.indexOf("width:"),h=a.indexOf("height:");width=parseInt(a.substring(c+6,c+a.substring(c).indexOf("px;")))+65;height=parseInt(a.substring(h+7,h+a.substring(h).indexOf("px;")))+65;0<a.indexOf("prodheight")&&(height+=115);$("#TB_ajaxContent").html("");0==$("#wishListPopupContainer").length&&(c=document.createElement("div"),c.setAttribute("id","wishListPopupContainer"),c.setAttribute("style","display:none;"),document.body.appendChild(c));$("#wishListPopupContainer").html(a.toString());
$(".wishListsMenuLinkSelector").find(".wishListsHoverMenuSelector").hide();$("#wishListPopupContainer").html(a.toString()).dialog({width:width,height:height,modal:!0})}}function showSaveWishlistComment(a){wishlistItemNoTemp=a;$.ajax({type:"POST",url:"/cp/catalogExp/wishlist_service.aspx?action=ShowSaveWishlistComment",data:{WishlistItemNo:wishlistItemNoTemp},success:showPopup})}
function saveWishlistItemComment(){var a=$("#txtWishlistItemComment").val();$.ajax({type:"POST",url:"/cp/catalogExp/wishlist_service.aspx?action=SaveWishlistItemComment",data:{WishlistItemNo:wishlistItemNoTemp,Comment:a},success:ReloadWishlistPage,error:ShowCommentError})}function ReloadWishlistPage(){location.reload();removeWishlistPopup()}function ShowCommentError(){alert("Your comment cannot contain html tags or javascript.")}function refreshWishLists(a){$(".wishListHolderSelector").html(a)}
function setWishlist(){var a=$("#txtListNameEdit").val();$("#lblWishlistName").text(a);var b=$("#txtListDescriptionEdit").val();$("#lblWishlistDescription").text(b);setWishlistSharelinks(a);removeWishlistPopup()}
function editWishlist(){var a=$("#txtListNameEdit").val().trim(),b=$("#txtListDescriptionEdit").val().trim(),b={WishlistNo:wishlistNoTemp,ListName:a,ListDescription:b};127<a.length?alert("WishList Name cannot be too long!!"):0<a.length?$.ajax({type:"POST",url:"/cp/catalogExp/wishlist_service.aspx?action=SaveWishList",data:b,success:showPopupWithRefresh,error:ShowHtmlError}):alert("Please enter the name of the list.")}
function ReloadWishlistMembersPage(a){try{$("#lbtnRefreshWishlistMembers").click()}catch(b){}removeWishlistPopup();$("#"+a).remove()}
function saveWishlist(){var a=$("#txtListName").val().trim(),b=$("#txtListDescription").val().trim();if(127<a.length)alert("WishList Name cannot be too long!!");else if(0<a.length){var c=$("#txtProductDescription").val(),h=$('select[name^="color_'+productNoTemp+'"]').val(),j=$('input[name^="size_'+productNoTemp+'"]').val();$.ajax({type:"POST",url:"/cp/catalogExp/wishlist_service.aspx?action=SaveWishList",data:{ProductNo:productNoTemp,Qty:1,Color:h,Size:j,ListName:a,ListDescription:b,ProductDescription:c,
WishlistItemNo:wishlistItemNoTemp,IsNewList:isNewList},success:showPopupWithRefresh,error:ShowHtmlError})}else alert("Please enter the name of the list.")}function showCreateNewWishlist(a){wishlistItemNoTemp="";productNoTemp=a;$.ajax({type:"POST",url:"/cp/catalogExp/wishlist_service.aspx?action=ShowCreateNewWishList",data:{ProductNo:a},success:showPopup})}
function showCreateNewWishlistWishThisProduct(a,b){var c=$('select[name^="color_'+a+'"]').val(),h=$('input[name^="size_'+a+'"]').val();productNoTemp=a;wishlistItemNoTemp=b;isNewList=!0;$.ajax({type:"POST",url:"/cp/catalogExp/wishlist_service.aspx?action=ShowCreateNewWishList",data:{ProductNo:productNoTemp,Qty:1,Color:c,Size:h,WishlistItemNo:wishlistItemNoTemp},success:showPopup})}
function InitWishlistsMenu(){$(".wishListsMenuLinkSelector").hover(function(){$(this).find(".wishListsHoverMenuSelector").show()},function(){$(this).find(".wishListsHoverMenuSelector").hide()})}function updateWishlist(){window.cafepress.showWishlists&&$("#yourlists").show()}function showSendEmail(a){wishlistNoTemp=a;$.ajax({type:"POST",url:"/cp/catalogExp/wishlist_service.aspx?action=ShowSendEmail",success:showPopup})}
function showEditWishlist(a){wishlistNoTemp=a;$.ajax({type:"POST",url:"/cp/catalogExp/wishlist_service.aspx?action=ShowEditWishlist",data:{WishlistNo:wishlistNoTemp},success:showPopup})}function MakeWishlistPrivate(a){$.ajax({type:"POST",url:"WishList.aspx?wishlistNo="+a,data:{edit:"1"},success:setWishlistPrivate});return!1}
function setWishlistPrivate(a,b){"success"==b&&(-1!=$("#aMakeWishlistPrivate").text().indexOf("public")?$("#aMakeWishlistPrivate").text("Make list private"):$("#aMakeWishlistPrivate").text("Make list public"))}
function SendMailToTextExample(a){"mouseout"==a.type&&""==$("#txtaSendMailTo").val()&&($("#txtaSendMailTo").css({color:"#B0D1E8"}),$("#txtaSendMailTo").val("Type in emails: jo@example.com,hy@example.com"));"mouseover"==a.type&&"Type in emails: jo@example.com,hy@example.com"==$("#txtaSendMailTo").val()&&($("#txtaSendMailTo").css({color:"black"}),$("#txtaSendMailTo").val(""))}function ShowHtmlError(){alert("Your could not enter html tags or javascript.")}
function setWishlistSharelinks(a){$("#lnkFacebook").attr("href","http://facebook.com/sharer.php?u="+$(location).attr("href"));$("#lnkTwitter").attr("href","http://twitter.com/home?status="+a+" - CafePress: "+$(location).attr("href")+" via @cafepress")}
function signInCallBack(a,b){"success"==b&&-1<a.indexOf("pnlAddedToWishlist")&&$(document).trigger("productaddedtowishlist",[productNoTemp]);try{var c;try{JSON}catch(h){c=eval("("+a+")")}c||(c=JSON.parse(a));reloadPage=c.ReloadPage;showPopupWithRefresh(a,b)}catch(j){showPopupWithRefresh(a,b)}}
function signIn(a){var b=$('select[name^="color_'+productNoTemp+'"]').val(),c=$('input[name^="size_'+productNoTemp+'"]').val(),h=$("#txtEmailAddress").val(),j=$("#txtPassword").val();$.ajax({type:"POST",url:"/cp/catalogExp/wishlist_service.aspx?action=SignIn",data:{ProductNo:productNoTemp,WishListNo:a,Qty:1,Color:b,Size:c,Email:h,Password:j},success:signInCallBack,error:ShowHtmlError})}
function addToWishList(a,b,c){var h=$('input[name^="color_'+b+'"]').val(),j=$('input[name^="size_'+b+'"]').val();productNoTemp=b;$.ajax({type:"POST",url:"/cp/catalogExp/wishlist_service.aspx?action=AddToList",data:{ProductNo:productNoTemp,WishListNo:a,Qty:1,Color:h,Size:j,WishlistItemNo:c},success:signInCallBack})}function removeWishlistPopup(){reloadPage&&window.location.reload();$("#wishListPopupContainer").dialog("destroy")}
function hideThickboxPopup(a){removeWishlistPopup();$("#"+a).remove()}function updateWishlist(){window.cafepress.showWishlists&&$("#yourlists").show()}$(function(){InitWishlistsMenu();updateWishlist()});window.cafepress=window.cafepress||{};window.cafepress.social=window.cafepress.social||{};window.cafepress.social.loaded=!1;
(function(a,b,c){var h=c.cafepress.www||"www.cafepress.com";a.parameters={aid:c.cafepress.aidValue?"&aid="+c.cafepress.aidValue:""};var j=c.innerWidth;a.isMobileView=function(){return 571>j};a.isTablet=function(){return 971>j};a.init=function(i){b(i).each(function(){var i=b(this)[0].getAttribute("data-page"),d=c.location.href,f=b(this)[0].getAttribute("data-image"),e=encodeURIComponent(f),k=b(this)[0].getAttribute("data-description"),k=encodeURIComponent(k);switch(b(this)[0].getAttribute("data-type")){case "facebook":a.facebook.init(d,
f,i,b(this));break;case "pinterest":a.pinterest.init(d,e,k,i,b(this));break;case "twitter":a.twitter.init(d,i,b(this));break;case "google":a.google.init(d,i,b(this));break;case "favorite":a.favorite.init(b(this).closest("div.grid-unit").data("prod"),b(this))}})};var m={},q=!1;m.init=function(a,g,d,f){var e=function(){f.off("mouseenter",e);m.loadScripts(function(){var g=a,e=0<g.indexOf("?")?"&":"?",g=g+(e+"utm_source=facebook&utm_tracking=social&utm_content="+d+c.cafepress.social.parameters.aid);if(q&&
c.FB){var n=g;f.click(function(){if(!FB)return!1;FB.ui({method:"share",href:c.location.href},function(){var a=f.data("pno"),i=f.data("dno"),g=f.data("designer"),c="";a?c="products":i&&(c="designs");var d=function(d){var f=c,e={dateTime:new Date,user:"facebook",action:"like",url:n,designId:i,designerId:g};a?(e.productId=a,e.target="product"):e.target="design";d&&(d.id&&d.name)&&(e.userName=d.name,e.userId=d.id);d="http://activity.cafepresscloud.com/likes/"+f+"/new";e={data:{activity:JSON.stringify(e)},
dataType:"jsonp"};b.ajax(d,e)};FB&&FB.api("/me",function(a){d&&d(a)})})})}})};f.off("mouseenter",e).on("mouseenter",e)};m.loadScripts=function(a){q?a():(q=!0,b.getScript("//connect.facebook.net/en_US/all.js",function(){FB.init({appId:"114957851874294",channelUrl:"//"+h+"/channel.html",status:!0,cookie:!0,xfbml:!0});a()}))};a.facebook=m;a.pinterest={init:function(a,g,b,f,e){var k=function(){b=b.replace("'","");var h=0<a.indexOf("?")?"&":"?";a+=h+"utm_source=pinterest&utm_tracking=social&utm_content="+
f+c.cafepress.social.parameters.aid;var n="http://www.pinterest.com/pin/create/button/?description={description}&media={media}&url={url}",n=n.replace("{url}",encodeURIComponent(a)).replace("{media}",g).replace("{description}",b).replace("{text}",e.text());e.off("mouseenter",k).click(function(){c.cafepress.social.openWindow(n);c.cafepress.social.pinterest.logToActivityService(a,e.data("pno"),e.data("dno"),e.data("designer"));e.off("click").addClass("disabled");return!1})};e.off("mouseenter",k).on("mouseenter",
k)},logToActivityService:function(a,g,d,f){g=c.cafepress.social.pinterest.getPinItObject(a,g,d,f);a="http://activity.cafepresscloud.com/pins/products/new";g={data:{activity:JSON.stringify(g)},dataType:"jsonp"};b.ajax(a,g)},getPinItObject:function(a,b,c,f){return{dateTime:new Date,user:"pinterest",action:"pin",url:a,target:"product",productId:b,designId:c,designerId:f}}};var p={},r=!1,l=null;p.init=function(i,g,d){var f=function(){d.off("mouseenter",f);var e="/m/socialmedia/tweet?status={status}",
h="{url}{separator}utm_source=twitter&utm_tracking=social&utm_content={page}"+c.cafepress.social.parameters.aid,j=0<i.indexOf("?")?"&":"?",h=h.replace("{url}",i).replace("{separator}",j).replace("{page}",g);d.off("click");d.click(function(){l=d;if(a.isMobileView())e=e.replace("{status}",encodeURIComponent(h)),c.cafepress.social.openWindow(e);else{var i=b('<div><h3>Enter text to share in Twitter:</h3> <br /><textarea class="social-twitter-share-text" >'+h+'</textarea><br /><br/><button style="float:right;" class="button twShare">Share</button></div>'),
g=500<b(c).width()?"360":"60%";i.dialog({autoOpen:!0,modal:!0,resizable:!1,width:g,close:function(){i.dialog("destroy")},dialogClass:"twitter-dialog"});i.find(".twShare").click(function(){var a=b(".social-twitter-share-text").val();e=e.replace("{status}",encodeURIComponent(a));c.cafepress.social.openWindow(e);i.dialog("close")})}return!1});r||(r=!0,b(c).on("message",function(a){if(a&&(a.originalEvent&&a.originalEvent.data&&a.originalEvent.origin)&&(a.preventDefault(),l&&a.originalEvent.origin.match(RegExp(c.cafepress.domain)))){var a=
a.originalEvent.data.split("&"),i,g;if((i=decodeURIComponent(a[0]))&&"Twitter"==i)i=decodeURIComponent(a[1]),g=decodeURIComponent(a[2]),decodeURIComponent(a[3]),decodeURIComponent(a[4]),l.off("click").addClass("disabled"),a={dateTime:new Date,user:"twitter",userId:i,userName:g,action:"tweet",url:l.data("url"),target:"product",productId:l.data("pno"),designId:l.data("dno"),designerId:l.data("designer")},a={data:{activity:JSON.stringify(a)},dataType:"jsonp"},b.ajax("http://activity.cafepresscloud.com/tweets/products/new",
a)}}))};d.off("mouseenter",f).on("mouseenter",f)};a.twitter=p;a.google={data:{scriptsLoaded:!1,clientScriptsLoaded:!1},initData:{isUserSignedIn:!1,url:null,page:null,container:null},config:{clientId:"693565830552-1e9tnl90qpth8rb2oj4ofd7uvg8goajr.apps.googleusercontent.com",scopes:"https://www.googleapis.com/auth/plus.me"},init:function(i,b,d){c.___gcfg={lang:"en-US",parsetags:"explicit"};var f=function(){a.google.initData.url=i;a.google.initData.page=b;a.google.initData.container=d;a.google.data.scriptsLoaded&&
a.google.data.clientScriptsLoaded?a.google.getIsLoggedIn(function(c){(a.google.initData.isUserSignedIn=c)?a.google.addPlusOneButton(i,b,d):(d.children(".plus-one-wrapper").hide(),d.removeClass("no-before"))}):a.google.loadPlusOneScript("onLoadedGooglePlusOneScript")};d.off("mouseenter",f).on("mouseenter",f);f=function(){a.google.initData.isUserSignedIn||a.google.authorize(i,b,d);return!1};d.off("click",f).on("click",f)},loadPlusOneScript:function(a){var b="https://apis.google.com/js/plusone.js";a&&
(b=b+"?onload="+a);a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=b;b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)},loadClientPlusOneScript:function(a){var b="https://apis.google.com/js/client:plusone.js";a&&(b=b+"?onload="+a);a=document.createElement("script");a.type="text/javascript";a.async=!0;a.src=b;b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)},getIsLoggedIn:function(b){gapi.auth.authorize({client_id:a.google.config.clientId,
scope:a.google.config.scopes,immediate:!0},function(a){a=!(!a||a.error);b&&b(a)})},authorize:function(b,c,d){gapi.auth.authorize({client_id:a.google.config.clientId,scope:a.google.config.scopes,immediate:!1},function(f){a.google.handleAuthResult(f,b,c,d)})},handleAuthResult:function(b){(!b||b.error)&&gapi.auth.signIn({clientid:a.google.config.clientId,cookiepolicy:"single_host_origin",scope:"https://www.googleapis.com/auth/plus.login",requestvisibleactions:"http://schemas.google.com/AddActivity"})},
addPlusOneButton:function(b,g,d){a.google.getUserId(function(a){d.attr("data-uid",a)});if(d.data("button-created"))d.children(".plus-one-wrapper").show(),d.addClass("no-before");else{var f='<div class="g-plusone" data-size="standard" data-callback="onGooglePlusOne" data-href={url}></div>',e=0<b.indexOf("?")?"&":"?",b=b+e+"utm_source=google&utm_tracking=social&utm_content={page}"+c.cafepress.social.parameters.aid,b=b.replace("{page}",g),f=f.replace("{url}",b);d.attr("data-button-created","true");d.html(f).addClass("no-before");
a.google.data.scriptsLoaded&&gapi.plusone.go(d.get(0))}},getUserId:function(a){gapi.client.load("plus","v1",function(){gapi.client.plus.people.get({userId:"me"}).execute(function(b){a&&a(b.id)})})},logGooglePlusToActivityService:function(a,g,d,f,e,h){a=c.cafepress.social.google.getPlusObject(a,g,d,f,e,h);e="http://activity.cafepresscloud.com/plus/"+e+"/new";a={data:{activity:JSON.stringify(a)},dataType:"jsonp"};b.ajax(e,a)},getPlusObject:function(a,b,c,f,e,h){return{dateTime:new Date,user:"googlePlus",
userId:h,action:"plus",url:a,target:"product",productId:b,designId:c,designerId:f}}};var p={},s=!1;p.init=function(b,c){c.click(function(){addToWishList&&addToWishList(0,b,-1)});a.isMobileView?t():c.mouseenter(function(){t()})};var t=function(){s||(s=!0,b.getScript("/content/mobile2.0/js/wishlist.js"))};a.favorite=p;a.bindFBFrame=function(a){var g=location.href,d=0>g.indexOf("?")?"?":"&",d=d+("utm_source=facebook&utm_tracking=social&utm_campaign=PDP"+c.cafepress.social.parameters.aid);0>g.indexOf(d)&&
(g+=d);g=g.replace(/&/g,"&amp;");/msie (9|10)/i.test(navigator.userAgent)?b(a).html('<iframe src="http://www.facebook.com/plugins/comments.php?href='+g+'&amp;ref=PDP" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:100%; height:300px;" allowTransparency="true"></iframe>'):(b(a).html('<fb:comments id="fbCommentsBox" href="" width="100%" font="arial" notify="true" migrated="1"></fb:comments>'),b("#fbCommentsBox").attr("href",g))};a.openWindow=function(a){return c.open(a,"",
"height=300,width=500")}})(window.cafepress.social,jQuery,window);function onLoadedGooglePlusOneScript(){window.cafepress.social.google.data.scriptsLoaded=!0;window.cafepress.social.google.loadClientPlusOneScript("onLoadedGoogleClientPlusOneScript")}
function onLoadedGoogleClientPlusOneScript(){window.cafepress.social.google.data.clientScriptsLoaded=!0;window.cafepress.social.google.getIsLoggedIn(function(a){(window.cafepress.social.google.initData.isUserSignedIn=a)&&window.cafepress.social.google.addPlusOneButton(window.cafepress.social.google.initData.url,window.cafepress.social.google.initData.page,window.cafepress.social.google.initData.container)})}
function onGooglePlusOne(a){if("off"!=a.state){var a=a.href.split("&utm_source")[0],a=$('.social-button[data-type="google"][data-url="'+a+'"]'),b=a.data("url"),c=a.data("pno"),h=a.data("dno"),j=a.data("designer"),m=a.data("uid");a.off("click").addClass("disabled");window.cafepress.social.google.logGooglePlusToActivityService(b,c,h,j,"products",m)}}function afterLoad(){$(document).trigger("socialbuttonsmoduleloaded");window.cafepress.social.loaded=!0}attachOnLoad(afterLoad);
